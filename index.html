<!-- Player Access Gate (client-side, saved on device) -->
<style id="gateLockStyle">html{visibility:hidden}</style>
<script>
(function () {
  const STORAGE_KEY = "shaolin_playbook_access_granted_v2"; // bump if you change password
  const PASSWORD = "SHAOLIN2026"; // <-- CHANGE THIS
  const MAX_TRIES = 3;

  function deny(message) {
    // Keep the page hidden, then show ONLY the deny message
    document.documentElement.innerHTML =
      "<head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'>" +
      "<title>Access Denied</title></head>" +
      "<body style='margin:0;font-family:system-ui;background:#000;color:#fff;'>" +
      "<div style='padding:24px;max-width:720px;margin:0 auto;'>" +
      "<h2>" + message + "</h2>" +
      "<p style='opacity:.75'>If you previously unlocked this device, use Reset Access or clear site data.</p>" +
      "</div></body>";
    // Make sure deny screen is visible
    document.documentElement.style.visibility = "visible";
    throw new Error(message);
  }

  // Already unlocked on this device/browser
  if (localStorage.getItem(STORAGE_KEY) === "1") {
    const s = document.getElementById("gateLockStyle");
    if (s) s.remove();
    document.documentElement.style.visibility = "visible";
    return;
  }

  for (let i = 0; i < MAX_TRIES; i++) {
    const input = prompt("Enter Team Playbook Password:");
    if (input === null) return deny("Access cancelled"); // ✅ Cancel = NO access

    if (input.trim() === PASSWORD) {
      localStorage.setItem(STORAGE_KEY, "1");
      const s = document.getElementById("gateLockStyle");
      if (s) s.remove();
      document.documentElement.style.visibility = "visible";
      return; // ✅ Success = show page
    }

    alert("Incorrect password.");
  }

  deny("Access denied");
})();
</script>
<!-- /Player Access Gate -->
